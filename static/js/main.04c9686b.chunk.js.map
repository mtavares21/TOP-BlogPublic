{"version":3,"sources":["blog_api.js","Comment.js","NewComment.js","Button.js","Post.js","User.js","Login.js","App.js","index.js"],"names":["axios","require","userInfo","a","fetch","method","headers","Credentials","body","JSON","stringify","response","json","user","post","username","password","data","Accept","posts","postId","token","encodeURIComponent","postid","text","catch","err","console","log","message","id","commentId","comments","Comment","author","date","useState","editable","setEditable","error","setError","inputText","setInputText","deleted","setDeleted","useContext","UserContext","className","defaultValue","user_id","_id","onClick","e","target","form","value","updateComment","then","prev","finally","type","deleteComment","NewComment","setNewComment","saveComment","Button","label","Post","title","isPublished","html","preview","setComments","newComment","loading","setLoading","showComments","setShowComments","useEffect","getComments","dangerouslySetInnerHTML","__html","length","map","comment","Date","updatedAt","toDateString","User","setShow","xmlns","viewBox","fill","fillRule","d","clipRule","Login","setUser","setMesssage","setResponse","logInUser","preventDefault","logIn","resolve","reject","signUpUser","createUser","errors","name","placeholder","React","createContext","isHtml","txt","DOMParser","parseFromString","document","createElement","innerHTML","decodeHtml","querySelector","App","setPosts","show","window","matchMedia","matches","checked","setChecked","getPosts","Provider","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.04c9686b.chunk.js","sourcesContent":["const axios = require(\"axios\");\n// Create User (sign-up)\n// User = { username:, password:}\nasync function createUser(userInfo) {\n  const response = await fetch(`https://gentle-refuge-60877.herokuapp.com/v1/users/signup`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Credentials: \"include\",\n    },\n    body: JSON.stringify(userInfo),\n  });\n  const user = await response.json();\n\n  return user;\n}\n\n// Login to Blog-API and get user details\nasync function logIn(user) {\n  try {\n    const response = await axios.post(\"https://gentle-refuge-60877.herokuapp.com/v1/users/login\", {\n      username: user.username,\n      password: user.password,\n    });\n    return response.data;\n  } catch (err) {\n    return err;\n  }\n}\n\n// Logout\nasync function logOut() {\n  try {\n    const data = await fetch(\"https://gentle-refuge-60877.herokuapp.com/v1/users/logout\", {\n      method: \"POST\", // *GET, POST, PUT, DELETE, etc.\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"*/*\",\n        Credentials: \"include\",\n      },\n    });\n    const parsedData = await data.json();\n    return parsedData;\n  } catch (err) {\n    return err;\n  }\n}\n\n// Get user\nasync function getUser() {\n  try {\n    const response = await axios.get(\"https://gentle-refuge-60877.herokuapp.com/v1/users/user\", {\n      withCredentials: true,\n    });\n    console.log({ getUser: response });\n    return response.data;\n  } catch (err) {\n    return err;\n  }\n}\n// GET posts\nasync function getPosts() {\n  const response = await fetch(\"https://gentle-refuge-60877.herokuapp.com/v1/allPosts\", {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"*/*\",\n      Credentials: \"include\",\n    },\n  });\n  const posts = await response.json();\n\n  return posts;\n}\n// POST comments\nasync function savePost(token, title, text, isPublished) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/posts`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\",\n        \"Credentials\": \"true\",\n        \"Authorization\": \"Bearer \" + token,\n      },\n      body: JSON.stringify({\n        \"title\":title,\n        \"text\": text,\n        \"isPublished\":isPublished,\n      }),\n    }\n  ).catch( err => console.log(err));\n  const message = await response.json().catch((err) => console.log(err));\n\n  return message;\n}\n\n// GET comments\nasync function getComments(postId, token) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/comments/?postid=${encodeURIComponent(postId)}`,\n    {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"*/*\",\n        Credentials: \"include\",\n        \"Authorization\": \"Bearer \" + token,\n      },\n    });\n  return response.json();\n}\n\n// POST comments\nasync function saveComment(postid, token, text) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/comments/?postid=${postid}`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\",\n        \"Credentials\": \"true\",\n        \"Authorization\": \"Bearer \" + token,\n      },\n      body: JSON.stringify({\n        \"text\": text,\n      }),\n    }\n  ).catch( err => console.log(err));\n  const message = await response.json().catch((err) => console.log(err));\n\n  return message;\n}\n\n// PUT comments\nasync function updateComment(id, token, text) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/comments/${id}/`,\n    {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\",\n        \"Authorization\": \"Bearer \" + token,\n      },\n      body: JSON.stringify({\n        \"text\": text,\n      }),\n    }\n  ).catch( err => console.log(err));\n  const message = await response.json().catch((err) => console.log(err));\n\n  return message;\n}\n\n// DELETE comments\nasync function deleteComment(token, commentId) {\n  // prettier-ignore\n  const response = await fetch(\n    `https://gentle-refuge-60877.herokuapp.com/v1/comments/${commentId}`,\n    {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"x-www-form-urlencoded\",\n        \"Accept\": \"*/*\",\n        \"Authorization\": \"Bearer \" + token,\n      }\n    }\n  );\n  const comments = await response.json();\n  return comments;\n}\n\nexport {\n  getPosts,\n  savePost,\n  getComments,\n  logIn,\n  logOut,\n  createUser,\n  getUser,\n  saveComment,\n  updateComment,\n  deleteComment,\n};\n","import React, { useContext, useState } from \"react\";\nimport \"./index.css\";\nimport { updateComment, deleteComment } from \"./blog_api\";\nimport { UserContext } from \"./App\";\n\nexport default function Comment({ id, text, author, date }) {\n  const [editable, setEditable] = useState(false);\n  const [error, setError] = useState(null);\n  const [inputText, setInputText] = useState(text);\n  const [deleted, setDeleted] = useState(false);\n  const user = useContext(UserContext);\n\n  const handleDeleteComment = () => {\n    deleteComment(user.token, id)\n      .then(setDeleted(true))\n      .catch((err) => setError((prev) => err))\n      .finally(() => setEditable(false));\n  };\n  const handleUpdateComment = (e) => {\n    const text = e.target.form[0].value;\n    updateComment(id, user.token, text)\n      .then((response) => {\n        setInputText((prev) => text);\n      })\n      .catch((err) => setError((prev) => error))\n      .finally(() => setEditable((prev) => false));\n  };\n  return (\n    <div\n      key={id}\n      className={`${\n        deleted ? \"hidden\" : \"flex\"\n      } container w-full p-5 pr-10 mt-5 max-h-42 mb-3 grid items-center justify-center bg-red-400 rounded-full text-white`}\n    >\n      <form className=\"md:w-full\">\n        <div className=\"my-2 w-full max-h-40 flex flex-wrap items-start justify-center \">\n          <h1 className=\"w-full mb-2 text-white font-sans font-medium overflow-scroll text-md\">\n            {author.username}:\n          </h1>\n          {editable ? (\n            <textarea\n              defaultValue={text}\n              className=\"w-full max-h-20 h-full overflow-scroll font-serif text-black text-justify\"\n            />\n          ) : (\n            <div className=\"w-full max-h-42 flex flex-wrap  items-start justify-center \">\n              <p className=\"flex md:w-96 sm:96 ml-4 max-h-16 h-full overflow-scroll font-serif text-justify\">\n                {inputText}\n              </p>\n            </div>\n          )}\n        </div>\n        <div className=\"flex md:flex-nowrap flex-wrap mt-2 w-full md:justify-between justify-center\">\n          {editable ? (\n            <div className=\"w-20 ml-4 max-h-16 h-full\"> </div>\n          ) : (\n            <p className=\"flex justify-start mt-1 md:w-full  w-full font-serif text-sm text-center\">\n              {date}\n            </p>\n          )}\n          {user.user_id === author._id ? (\n            <div className=\"flex flex-nowrap w-1/3 justify-center md:justify-end\">\n              <button\n                onClick={\n                  editable\n                    ? handleUpdateComment\n                    : () => setEditable((prev) => true)\n                }\n                type=\"button\"\n                className=\"p-1 h-7 mb-1 mx-1 flex rounded-full bg-white px-5 text-sm text-red-400\"\n              >\n                {editable ? \"Save\" : \"Edit\"}\n              </button>\n              <button\n                onClick={handleDeleteComment}\n                type=\"button\"\n                className=\"p-1 h-7 flex rounded-full bg-white px-3 text-sm text-red-400\"\n              >\n                Delete\n              </button>\n            </div>\n          ) : null}\n        </div>\n      </form>\n    </div>\n  );\n}\n","import React, { useContext } from \"react\";\nimport \"./index.css\";\nimport { useState } from \"react\";\nimport { saveComment } from \"./blog_api\";\nimport { UserContext } from \"./App\";\n\nexport default function NewComment({postid, setNewComment }) {\n  const [error, setError] = useState(false);\n  const user = useContext(UserContext);\n\n  const createComment = (e) => {\n    const text = e.target.form[0].value;\n    saveComment(postid, user.token, text)\n      .then((response) => {\n        setNewComment((prev) => false);\n      })\n      .catch((err) => {\n        setError((prev) => err);\n      });\n  };\n\n  const cancelComment = () => {\n    setNewComment((prev) => false);\n  };\n\n  return (\n    <div\n      className={\n        \"container w-full sm:py-3 sm:px-9 px-5 py-5 max-h-52 mb-3 md:w-5/6 flex flex-wrap items-center sm:justify-center bg-red-400 rounded-full text-white\"\n      }\n    >\n      <form className=\"flex w-full max-h-52 justify-center flex-wrap\">\n        <div className=\"w-full max-h-52 flex flex-wrap items-center justify-center\">\n          <textarea className=\"w-96 sm:mt-5 max-h-20 h-full overflow-scroll font-serif text-black text-justify\" />\n          <div className=\"flex sm:flex-wrap md:justify-end justify-center items-center sm:h-1/4 w-full mx-5\">\n            <button\n              type=\"button\"\n              onClick={createComment}\n              className=\"p-1 my-2 flex rounded-full bg-white px-2 text-sm text-red-400\"\n            >\n              Save\n            </button>\n            <button\n              type=\"button\"\n              onClick={cancelComment}\n              className=\"p-1 my-2 ml-2 flex rounded-full bg-white px-2 text-sm text-red-400\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport default function Button ({type,label, onClick}){\n\treturn (\n        <button\n          type={type}\n          onClick={onClick}\n          className=\"p-1 mt-3 mx-full flex rounded-full bg-red-400 px-2 text-sm text-white\"\n        >\n          {label}\n        </button>\n      );\n}","import React from \"react\";\nimport { useState, useEffect, useContext } from \"react\";\nimport Comment from \"./Comment\";\nimport { getComments } from \"./blog_api\";\nimport NewComment from \"./NewComment\";\nimport { UserContext } from \"./App\";\nimport Button from \"./Button\";\n\nexport default function Post({\n  postId,\n  title,\n  text,\n  date,\n  isPublished,\n  html,\n  preview,\n}) {\n  const [comments, setComments] = useState([]);\n  const [newComment, setNewComment] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [showComments, setShowComments] = useState(false);\n  const user = useContext(UserContext);\n\n  useEffect(() => {\n    if (showComments && user) {\n      getComments(postId, user.token)\n        .then((response) => {\n          setComments((prev) => response);\n        })\n        .catch((err) => {\n          setError((prev) => true);\n        })\n        .finally(() => {\n          setLoading((prev) => false);\n        });\n    }\n    return () => setError((prev) => false);\n  }, [postId, showComments, user]);\n\n  const renderComments = () => {\n    if (loading) return <div className=\"loader\"></div>;\n    else if (error) {\n      return \"Failed to load comments.\";\n    } else if (!comments.length) {\n      return \"No comments yet.\";\n    } else {\n      return comments.map((comment) => {\n        const date = new Date(comment.updatedAt);\n        return (\n          <div\n            key={comment._id}\n            className=\"flex flex-wrap w-full justify-start\"\n          >\n            <Comment\n              id={comment._id}\n              author={comment.author}\n              text={comment.text}\n              date={date.toDateString()}\n            />\n          </div>\n        );\n      });\n    }\n  };\n\n  const renderNewComment = () => {\n    if (!!user && newComment) {\n      return <NewComment postid={postId} setNewComment={setNewComment} />;\n    } else if (!!user) {\n      return (\n        <Button\n          onClick={preview ? () => {} : () => setNewComment((prev) => !prev)}\n          label=\"New Comment\"\n        />\n      );\n    } else return null;\n  };\n  return (\n    isPublished ? <div className=\"dark:bg-gray-700 container mt-10 md:w-2/3 flex flex-wrap items-center justify-center bg-white\">\n      <div className=\"container mt-10 flex flex-wrap justify-center items-center\">\n        <div className=\"flex flex-row no-wrap items-center w-full\">\n          <h1 className=\"w-full my-10 text-center text-red-400 font-sans font-bold text-4xl\">\n            {title}\n          </h1>\n        </div>\n        <p className=\"dark:text-gray-200 w-full font-serif text-justify min-h-70\">\n          {!!html ? <div dangerouslySetInnerHTML={{ __html: html }} /> : text}\n        </p>\n        <p className=\"w-full font-serif underline-red-500\">\n          <mark className=\"bg-red-400 px-2 text-sm text-white\">{date}</mark>\n        </p>\n      </div>\n      <div className=\"flex flex-wrap w-full\">\n        {renderNewComment()}\n        <div className=\"w-full\">\n          {!!user ? (\n            <Button\n              onClick={\n                preview ? () => {} : () => setShowComments((prev) => !prev)\n              }\n              label={showComments ? \"Hide comments\" : \"See comments\"}\n            />\n          ) : null}\n          {showComments && !!user ? renderComments() : null}\n        </div>\n      </div>\n    </div> : null\n  );\n}\n","import React from \"react\";\n\nexport default function User({ setShow }) {\n  return (\n    <div className=\"absolute sm:right-12 right-4  top-0\">\n      <div\n        onClick={() => setShow((prev) => !prev)}\n        className=\"flex flex-wrap justify-center w-full\"\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          className=\"sm:h-10 sm:w-10 h-7 w-7 absolute right-1 top-8\"\n          viewBox=\"0 0 20 20\"\n          fill=\"currentColor\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\"\n            clipRule=\"evenodd\"\n          />\n        </svg>\n      </div>\n    </div>\n  );\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { logIn, createUser } from \"./blog_api\";\nimport { UserContext } from \"./App\";\n\nexport default function Login({ setUser }) {\n  \n  const [message, setMesssage] = useState(null);\n  const [response, setResponse] = useState(null);\n  const user = useContext(UserContext);\n\n  const logInUser = (e) => {\n    e.preventDefault()\n    // Login with inserted credentials and setUser\n    logIn({\n      username: e.target.form[0].value,\n      password: e.target.form[1].value,\n    }).then((resolve, reject) => {\n      if (reject) {\n        setResponse( prev => \"Log-in failed.\")\n      } else {\n        setUser({\n            user_id: resolve.user_id,\n            username: resolve.username,\n            token: resolve.token,\n            password: e.target.form[1].value,\n          });\n        };\n      })\n    };\n\n  const signUpUser = (e) => {\n    e.preventDefault()\n    // Login with inserted credentials and setUser\n    createUser({\n      username: e.target.form[0].value,\n      password: e.target.form[1].value,\n    }).then((resolve) => {\n        if (resolve.errors){\n          setResponse( prev => resolve.errors[0]);\n          console.log(message);\n        }\n        else setResponse( prev => resolve);\n    })\n  };\n\n  const logOutUser = () => {\n    setUser((prev) => null);\n  };\n\n  useEffect( () => {\n    setMesssage( prev => response)\n    return () => setMesssage( prev => null)\n  }, [response])\n\n  return (\n    <div\n      className=\"absolute top-24 right-0 h-30 md:w-1/3 sm:w-40 w-full bg-gray-800 px-5 pb-5 z-10 font-sans text-base text-justify\"\n    >\n      {!!user ? (\n        <div>\n          <p className=\"text-red-400 font-bold text-center mt-4\">\n            {user.username}\n          </p>\n          <button\n            type=\"button\"\n            onClick={(e) => logOutUser(e)}\n            className=\"text-red-400 w-full mb-2\"\n          >\n            Log-out\n          </button>\n        </div>\n      ) : (\n        <form className=\"container flex flex-wrap w-full justify-center items-between\">\n          <input\n            name=\"username\"\n            type=\"email\"\n            placeholder=\"username/mail\"\n            className=\"w-full my-3\"\n          />\n          <input\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"password\"\n            className=\"w-full mb-3\"\n          />\n          <p>{message}</p>\n          <button\n            type=\"button\"\n            onClick={(e) => logInUser(e)}\n            className=\"text-red-400 w-full mb-2\"\n          >\n            Log-in\n          </button>\n          <button\n            type=\"button\"\n            onClick={(e) => signUpUser(e)}\n            className=\"text-red-400 w-full\"\n          >\n            Sign-up\n          </button>\n        </form>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport Post from \"./Post\";\nimport User from \"./User\";\nimport Login from \"./Login\";\nimport { getPosts, logIn } from \"./blog_api\";\nimport { useEffect, useState } from \"react\";\n\nconst UserContext = React.createContext(null);\n\nfunction decodeHtml(html) {\n  var txt = document.createElement(\"textarea\");\n  txt.innerHTML = html;\n  return txt.value;\n}\n\nconst isHtml = (txt) => {\n  const htmlParser = new DOMParser();\n  const parsedText = htmlParser.parseFromString(\n    \"<div>\" + decodeHtml(txt) + \"</div>\",\n    \"text/xml\"\n  );\n  return !!!parsedText.querySelector(\"parsererror\");\n};\n\n\nfunction App() {\n  const [posts, setPosts] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [show, setShow] = useState(false);\n  const [user, setUser] = useState(null);\n  const [checked, setChecked] = useState(\n    window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n  );\n\n  useEffect(() => {\n    getPosts()\n      .then((response) => {\n        setPosts((prev) => response);\n      })\n      .catch((err) => {\n        setError((prev) => err);\n      })\n      .finally(() => {\n        setLoading((prev) => false);\n      });\n  }, []);\n\n  const renderPosts = () => {\n    if (loading) return <div className=\"loader\"></div>;\n    else if (error) {\n      return <p>\"Failed to load posts.\"</p>;\n    } else {\n      return posts.map((post) => {\n        const date = new Date(post.updatedAt);\n        if (isHtml(post.text)) {\n          return (\n            <div key={post._id} className=\"flex flex-wrap w-4/5 justify-center\">\n              <Post\n                key={post._id}\n                postId={post._id}\n                title={post.title}\n                html={post.text}\n                isPublished={post.isPublished}\n                date={date.toDateString()}\n              />\n            </div>\n          );\n        } else {\n          return (\n            <div key={post._id} className=\"flex flex-wrap w-4/5 justify-center\">\n              <Post\n                postId={post._id}\n                title={post.title}\n                text={post.text}\n                isPublished={post.isPublished}\n                date={date.toDateString()}\n              />\n            </div>\n          );\n        }\n      });\n    }\n  };\n  return (\n    <UserContext.Provider value={user}>\n      <div\n        className={`${\n          checked ? \"dark\" : null\n        } w-screen min-h-screen h-full  flex flex-wrap justify-center justify-items-center`}\n      >\n        <header className=\"flex pl-5 items-center justify-between font-sans text-2xl font-bold text-red-400 bg-gray-800 h-24 w-full\">\n          I'm a Blogger now\n          <User setShow={setShow} />\n        </header>\n        {show ? <Login setUser={setUser}/> : null}\n        <div className=\"dark:bg-gray-700 min-h-screen h-full self-center w-full flex flex-wrap justify-center font-sans\">\n          <div className=\"w-full mt-5 mx-10 mb-0 flex justify-end\">\n            <label className=\"switch\">\n              <input\n                onClick={() => setChecked((prev) => !prev)}\n                type=\"checkbox\"\n                checked={checked}\n              />\n              <span className=\"slider round\"></span>\n            </label>\n          </div>\n          {renderPosts()}\n        </div>\n      </div>\n    </UserContext.Provider>\n  );\n}\n\nexport { App, UserContext };\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { App } from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}